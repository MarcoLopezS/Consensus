{"version":3,"sources":["js-usuario-update.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"js-usuario-update.js","sourcesContent":["//UPDATE DE DATOS DE USUARIO\r\n$(\".btnUserUpdate\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var formName = $(this).data(\"form\");\r\n    var form = $(\"#\"+formName);\r\n    var url = form.attr('action');\r\n    var data = form.serialize();\r\n    var formMessage = $(\".form-content.info-personal\");\r\n\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        data: data,\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        success: function (result) {\r\n            var successHtml = '<div class=\"alert alert-success\"><button class=\"close\" data-close=\"alert\"></button>El registro se actualizó satisfactoriamente.</div>';\r\n            formMessage.html(successHtml);\r\n        },\r\n        error: function (result) {\r\n            if(result.status === 422){\r\n                var errors = result.responseJSON;\r\n                var errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li>' + value[0] + '</li>';\r\n                });\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }else{\r\n                errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                errorsHtml += '<li>Se ha producido un error. Intentelo de nuevo.</li>';\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n//UPDATE DE TARIFAS DE ABOGADO\r\n$(\"#btnTarifaUpdate\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var form = $(\"#formTarifaUpdate\");\r\n    var url = form.attr('action');\r\n    var data = form.serialize();\r\n    var formMessage = $(\".form-content.tarifas\");\r\n\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        data: data,\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        success: function (result) {\r\n            var successHtml = '<div class=\"alert alert-success\"><button class=\"close\" data-close=\"alert\"></button>El registro se actualizó satisfactoriamente.</div>';\r\n            formMessage.html(successHtml);\r\n        },\r\n        error: function (result) {\r\n            if(result.status === 422){\r\n                var errors = result.responseJSON;\r\n                var errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li>' + value[0] + '</li>';\r\n                });\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }else{\r\n                errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                errorsHtml += '<li>Se ha producido un error. Intentelo de nuevo.</li>';\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }\r\n        }\r\n    });\r\n\r\n});\r\n\r\n/* UPDATE DE FOTO DE USUARIO */\r\n//UPLOAD DE FOTO\r\nvar myDropzone = new Dropzone(\".dropzone\", {\r\n    dictDefaultMessage: 'Da clic para seleccionar el archivo',\r\n    dictMaxFilesExceeded: 'No se puede cargar más archivos',\r\n    method: 'POST',\r\n    headers: {'X-CSRF-Token': '{!! csrf_token() !!}'},\r\n    maxFiles: 1,\r\n    autoProcessQueue: false,\r\n    success: function (file, result) {\r\n        var imagen = \"/imagenes/\" + result.carpeta + \"250x250/\" + result.archivo;\r\n        $(\"#fotoUsuario\").attr(\"src\", imagen);\r\n        myDropzone.removeAllFiles();\r\n    }\r\n});\r\n\r\n//UPLOAD DE FOTO AL DAR CLICK EN SUBIR\r\n$(\"#btnFotoCambiar\").on(\"click\", function(){\r\n    myDropzone.processQueue();\r\n});\r\n\r\n//ELIMINAR FOTOS DE CUADRO DE DROPZONE\r\n$(\"#btnFotoEliminar\").on(\"click\", function(){\r\n    myDropzone.removeAllFiles();\r\n});\r\n\r\n//ELIMINAR FOTO ACTUAL DE USUARIO\r\n$(\"#btnFotoEliminarActual\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var url = $(this).data('url');\r\n    var formMessage = $(\".form-content.cambiar-foto\");\r\n\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        headers: {'X-CSRF-Token': '{!! csrf_token() !!}'},\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        success: function (result) {\r\n            var imagen = \"/imagenes/user.png\";\r\n            $(\"#fotoUsuario\").attr(\"src\", imagen);\r\n\r\n            var successHtml = '<div class=\"alert alert-success\"><button class=\"close\" data-close=\"alert\"></button>El registro se actualizó satisfactoriamente.</div>';\r\n            formMessage.html(successHtml);\r\n        },\r\n        error: function (result) {\r\n            if(result.status === 422){\r\n                var errors = result.responseJSON;\r\n                var errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li>' + value[0] + '</li>';\r\n                });\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }else{\r\n                errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                errorsHtml += '<li>Se ha producido un error. Intentelo de nuevo.</li>';\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n//CAMBIAR CONTRASEÑA\r\n$(\"#btnPasswordUpdate\").on(\"click\", function (e) {\r\n    e.preventDefault();\r\n\r\n    var form = $(\"#formPasswordUpdate\");\r\n    var url = form.attr('action');\r\n    var data = form.serialize();\r\n    var formMessage = $(\".form-content.cambiar-clave\");\r\n\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        data: data,\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        success: function (result) {\r\n            var mensaje;\r\n            if(result.correo == true){ mensaje = 'La contraseña se envío por correo al usuario.' }\r\n            else{ mensaje = ''; }\r\n            var successHtml = '<div class=\"alert alert-success\"><button class=\"close\" data-close=\"alert\"></button>El registro se actualizó satisfactoriamente. '+ mensaje +'</div>';\r\n            formMessage.html(successHtml);\r\n            form[0].reset();\r\n            $(\".checker span\").removeClass('checked');\r\n        },\r\n        error: function (result) {\r\n            if(result.status === 422){\r\n                var errors = result.responseJSON;\r\n                var errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li>' + value[0] + '</li>';\r\n                });\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }else{\r\n                errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                errorsHtml += '<li>Se ha producido un error. Intentelo de nuevo.</li>';\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }\r\n        }\r\n    });\r\n\r\n});\r\n\r\n//CAMBIAR PERMISOS\r\n$(\"#btnPermisosUpdate\").on(\"click\", function (e) {\r\n    e.preventDefault();\r\n\r\n    var form = $(\"#formPermisosUpdate\");\r\n    var url = form.attr('action');\r\n    var data = form.serialize();\r\n    var formMessage = $(\".form-content.cambiar-permisos\");\r\n\r\n    $.ajax({\r\n        url: url,\r\n        type: 'POST',\r\n        data: data,\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        success: function (result) {\r\n            var successHtml = '<div class=\"alert alert-success\"><button class=\"close\" data-close=\"alert\"></button>El registro se actualizó satisfactoriamente.</div>';\r\n            formMessage.html(successHtml);\r\n        },\r\n        error: function (result) {\r\n            if(result.status === 422){\r\n                var errors = result.responseJSON;\r\n                var errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                $.each( errors, function( key, value ) {\r\n                    errorsHtml += '<li>' + value[0] + '</li>';\r\n                });\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }else{\r\n                errorsHtml = '<div class=\"alert alert-danger\"><button class=\"close\" data-close=\"alert\"></button><ul>';\r\n                errorsHtml += '<li>Se ha producido un error. Intentelo de nuevo.</li>';\r\n                errorsHtml += '</ul></div>';\r\n                formMessage.html(errorsHtml);\r\n            }\r\n        }\r\n    });\r\n\r\n});"]}