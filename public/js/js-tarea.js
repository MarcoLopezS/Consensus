function borrarAccion(){$(".btn-delete").on("click",function(a){a.preventDefault();var e=$(this).data("url"),t=$(this).data("title"),s=$(this).data("accion");bootbox.dialog({title:"Eliminar registro",message:"<strong>Desea eliminar la acción:</strong> "+t,closeButton:!1,buttons:{cancel:{label:"Cancelar",className:"default"},success:{label:"Eliminar",className:"blue",callback:function(){$.ajax({url:e,type:"POST",data:{_method:"DELETE"},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide()},success:function(a){$("#mensajeAjax").show(),$("#mensajeAjax .alert").show().removeClass("alert-danger").addClass("alert-success"),$("#mensajeAjax span").text(a.message),$("#accion-select-"+s).fadeOut()},error:function(a){$("#mensajeAjax").show(),$("#mensajeAjax .alert").show().removeClass("alert-success").addClass("alert-danger"),$("#mensajeAjax span").text("Se produjo un error al eliminar el registro"),$(".accion-select-"+s).show()}})}}}})})}$(".tarea-acciones").on("click",function(a){a.preventDefault();var e=$(this).data("id"),t=$(this).data("list"),s=$(this).data("create");$.ajax({url:t,type:"GET",success:function(a){var t='<tr id="accion-'+e+'" class="bg-default" style="display:none;"><td style="padding:20px 15px;" colspan="23"><div class="btn-group pull-left"><h3 class="table-title">Acciones</h3></div><div class="btn-group pull-right table-botones"><a class="btn sbold white accion-cerrar" href="#" data-id="'+e+'"> Cerrar </a><a class="btn sbold blue-soft" href="'+s+'" data-target="#ajax" data-toggle="modal"> Agregar nueva acción <i class="fa fa-plus"></i></a></div><table id="accion-lista-'+e+'" class="table table-striped table-bordered table-hover order-column"><thead><tr role="row" class="heading"><td>Fecha</td><td>Desde</td><td>Hasta</td><td>Horas</td><td>Descripcion</td><td></td></tr></thead><tbody></tbody></table></td></tr>';$("#tarea-"+e).after(t),$.each(JSON.parse(a),function(a,t){r=$('<tr id="accion-select-'+t.id+'">'),r.append("<td>"+t.fecha_accion+"</td>"),r.append("<td>"+t.desde+"</td>"),r.append("<td>"+t.hasta+"</td>"),r.append("<td>"+t.horas+"</td>"),r.append("<td>"+t.descripcion+"</td>"),r.append('<td class="text-center"><div class="btn-group"><button class="btn btn-xs blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> Movimientos<i class="fa fa-angle-down"></i></button><ul class="dropdown-menu pull-right" role="menu"><li><a href="'+t.url_lista_gastos+'" data-target="#ajax" data-toggle="modal">Gastos</a></li><li><a href="'+t.url_editar+'" data-target="#ajax" data-toggle="modal">Editar</a></li><li><a href="#" data-url="'+t.url_eliminar+'" data-title="'+t.descripcion+'" data-accion="'+t.id+'" class="btn-delete">Eliminar</a></li></ul></div></td></tr>'),$("#accion-lista-"+e+" tbody").prepend(r)}),$("#accion-"+e).fadeIn(),borrarAccion();var r;$(".accion-cerrar").on("click",function(a){a.preventDefault();var e=$(this).data("id");$("#accion-"+e).fadeOut()})},beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide()},error:function(){}})});