{"version":3,"sources":["js-funciones.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"js-funciones.js","sourcesContent":["//return an array of objects according to key, value, or key and value matching\r\nfunction getObjects(obj, key, val) {\r\n    var objects = [];\r\n    for (var i in obj) {\r\n        if (!obj.hasOwnProperty(i)) continue;\r\n        if (typeof obj[i] == 'object') {\r\n            objects = objects.concat(getObjects(obj[i], key, val));\r\n        } else\r\n        //if key matches and value matches or if key matches and value is not passed (eliminating the case where key matches but passed value does not)\r\n        if (i == key && obj[i] == val || i == key && val == '') { //\r\n            objects.push(obj);\r\n        } else if (obj[i] == val && key == ''){\r\n            //only add if the object is not already in the array\r\n            if (objects.lastIndexOf(obj) == -1){\r\n                objects.push(obj);\r\n            }\r\n        }\r\n    }\r\n    return objects;\r\n}\r\n\r\n//return an array of values that match on a certain key\r\nfunction getValues(obj, key) {\r\n    var objects = [];\r\n    for (var i in obj) {\r\n        if (!obj.hasOwnProperty(i)) continue;\r\n        if (typeof obj[i] == 'object') {\r\n            objects = objects.concat(getValues(obj[i], key));\r\n        } else if (i == key) {\r\n            objects.push(obj[i]);\r\n        }\r\n    }\r\n    return objects;\r\n}\r\n\r\n//return an array of keys that match on a certain value\r\nfunction getKeys(obj, val) {\r\n    var objects = [];\r\n    for (var i in obj) {\r\n        if (!obj.hasOwnProperty(i)) continue;\r\n        if (typeof obj[i] == 'object') {\r\n            objects = objects.concat(getKeys(obj[i], val));\r\n        } else if (obj[i] == val) {\r\n            objects.push(i);\r\n        }\r\n    }\r\n    return objects;\r\n}\r\n\r\n\r\n/*\r\nFunción para editar acción\r\n */\r\nfunction editarAccion() {\r\n\r\n    $(\".editar-accion\").on(\"click\", function(e){\r\n        e.preventDefault();\r\n\r\n        var url = $(this).data('url');\r\n        var update = $(this).data('update');\r\n        var token = $(\"#token\").attr('content');\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'GET',\r\n            beforeSend: function () { $('.progress').show(); },\r\n            complete: function () {\r\n                $('.progress').hide();\r\n                $(\"#form-agregar\").fadeOut();\r\n                $(\"#formCreateSubmit\").fadeOut();\r\n                $(\"#form-editar\").fadeIn();\r\n                $(\"#formUpdateSubmit\").fadeIn();\r\n            },\r\n            success: function(result){\r\n                var html = '<form method=\"POST\" action='+ update +' id=\"formEdit\" class=\"horizontal-form\" autocomplete=\"off\">' +\r\n                    '<input name=\"_method\" type=\"hidden\" value=\"PUT\">' +\r\n                    '<input name=\"_token\" type=\"hidden\" value=\"'+ token +'\">' +\r\n                    '<div class=\"form-body\">' +\r\n                    '<div class=\"col-md-4\">' +\r\n                    '<div class=\"form-group\">' +\r\n                    '<label for=\"fecha\" class=\"control-label\">Fecha</label>' +\r\n                    '<div class=\"input-group input-medium date date-picker\" data-date-format=\"dd/mm/yyyy\" data-date-viewmode=\"years\">' +\r\n                    '<input type=\"text\" name=\"fecha\" value=\"'+ result.fecha +'\" class=\"form-control\" />' +\r\n                    '<span class=\"input-group-btn\"><button class=\"btn default\" type=\"button\"><i class=\"fa fa-calendar\"></i></button></span>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '<div class=\"col-md-4\">' +\r\n                    '<div class=\"form-group\">' +\r\n                    '<label for=\"desde\" class=\"control-label\">Desde</label>' +\r\n                    '<div class=\"input-group\">' +\r\n                    '<input type=\"text\" name=\"desde\" value=\"'+ result.desde +'\" class=\"form-control timepicker timepicker-24\" />' +\r\n                    '<span class=\"input-group-btn\"><button class=\"btn default\" type=\"button\"><i class=\"fa fa-clock-o\"></i></button></span>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '<div class=\"col-md-4\">' +\r\n                    '<div class=\"form-group\">' +\r\n                    '<label for=\"hasta\" class=\"control-label\">Hasta</label>' +\r\n                    '<div class=\"input-group\">' +\r\n                    '<input type=\"text\" name=\"hasta\" value=\"'+ result.hasta +'\" class=\"form-control timepicker timepicker-24\" />' +\r\n                    '<span class=\"input-group-btn\"><button class=\"btn default\" type=\"button\"><i class=\"fa fa-clock-o\"></i></button></span>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '<div class=\"col-md-12\">' +\r\n                    '<div class=\"form-group\">' +\r\n                    '<label for=\"descripcion\" class=\"control-label\">Descripción</label>' +\r\n                    '<textarea name=\"descripcion\" class=\"form-control\" rows=\"3\">'+ result.descripcion +'</textarea>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</form>';\r\n\r\n                $(\"#formulario-contenido\").append(html);\r\n\r\n                $('.date-picker').datepicker({\r\n                    orientation: \"left\",\r\n                    autoclose: true,\r\n                    language: \"es\"\r\n                });\r\n\r\n                $('.timepicker-24').timepicker({\r\n                    autoclose: true,\r\n                    minuteStep: 5,\r\n                    showSeconds: false,\r\n                    showMeridian: false\r\n                });\r\n\r\n                $(\"#form-editar\").fadeIn();\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n\r\n/*\r\nFunción para borrar Acción que se muestra\r\nen la lista de Expedientes/Tareas o Tiempos/Tareas\r\n */\r\nfunction borrarAccion(){\r\n    $('.btn-delete').on(\"click\", function(e){\r\n        e.preventDefault();\r\n\r\n        var url = $(this).data('url');\r\n        var title = $(this).data('title');\r\n        var accion = $(this).data('accion');\r\n\r\n        bootbox.dialog({\r\n            title: 'Eliminar registro',\r\n            message: '\\<\\strong\\>\\Desea eliminar la acción:\\</\\strong\\>\\ '+ title,\r\n            closeButton: false,\r\n            buttons: {\r\n                cancel: {\r\n                    label: 'Cancelar',\r\n                    className: 'default'\r\n                },\r\n                success: {\r\n                    label: 'Eliminar',\r\n                    className: 'blue',\r\n                    callback: function() {\r\n                        $.ajax({\r\n                            url: url,\r\n                            type: 'POST',\r\n                            data: {'_method': 'DELETE'},\r\n                            headers: { 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content') },\r\n                            beforeSend: function () { $('.progress').show(); },\r\n                            complete: function () { $('.progress').hide(); },\r\n                            success: function (result) {\r\n                                $(\"#mensajeAjax\").show();\r\n                                $(\"#mensajeAjax .alert\").show().removeClass('alert-danger').addClass('alert-success');\r\n                                $(\"#mensajeAjax span\").text(result.message);\r\n                                $(\"#accion-select-\"+ accion).fadeOut();\r\n                            },\r\n                            error: function (result) {\r\n                                $(\"#mensajeAjax\").show();\r\n                                $(\"#mensajeAjax .alert\").show().removeClass('alert-success').addClass('alert-danger');\r\n                                $(\"#mensajeAjax span\").text(\"Se produjo un error al eliminar el registro\");\r\n                                $(\".accion-select-\"+ accion).show();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n\r\n/*\r\nFuncion para mostar la lista de acciones de\r\ntarea seleccionada en la vista Lista de Expedientes\r\n */\r\nfunction tareaListaAcciones()\r\n{\r\n    $(\".expediente-tarea-acciones-lista\").on(\"click\", function (e) {\r\n        e.preventDefault();\r\n\r\n        var id = $(this).data('id');\r\n        var list = $(this).data('list');\r\n        var create = $(this).data('create');\r\n\r\n        $.ajax({\r\n            url: list,\r\n            type: 'GET',\r\n            success: function (result) {\r\n                var html = '<tr id=\"acciones-'+id+'\" class=\"bg-default\" style=\"display:none;\">' +\r\n                    '<td style=\"padding:20px 15px; border: 2px solid #b0b0b0;\" colspan=\"23\">' +\r\n                    '<div class=\"btn-group pull-left\">' +\r\n                    '<h3 class=\"table-title\">Acciones</h3>' +\r\n                    '</div>' +\r\n                    '<div class=\"btn-group pull-right table-botones\">' +\r\n                    '<a class=\"btn sbold white accion-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                    '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nueva acción <i class=\"fa fa-plus\"></i></a>' +\r\n                    '</div>' +\r\n                    '<table id=\"accion-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                    '<thead>' +\r\n                    '<tr role=\"row\" class=\"heading\">' +\r\n                    '<td>Fecha</td>' +\r\n                    '<td>Desde</td>' +\r\n                    '<td>Hasta</td>' +\r\n                    '<td>Horas</td>' +\r\n                    '<td>Descripción</td>' +\r\n                    '<td>Gastos</td>' +\r\n                    '<td></td>' +\r\n                    '</tr>' +\r\n                    '</thead>' +\r\n                    '<tbody></tbody>' +\r\n                    '</table>' +\r\n                    '</td>' +\r\n                    '</tr>';\r\n\r\n                $(\"#tarea-select-\" + id).after(html);\r\n                $(\"#acciones-\" + id).fadeIn();\r\n\r\n                var tr, descripcion;\r\n\r\n                $.each(JSON.parse(result), function(idx, obj) {\r\n\r\n                    descripcion = obj.descripcion;\r\n\r\n                    tr = $('<tr id=\"accion-select-'+ obj.id +'\">');\r\n                    tr.append('<td>'+ obj.fecha_accion +'</td>');\r\n                    tr.append('<td>'+ obj.desde +'</td>');\r\n                    tr.append('<td>'+ obj.hasta +'</td>');\r\n                    tr.append('<td>'+ obj.horas +'</td>');\r\n                    tr.append('<td data-tooltip=\"'+ obj.descripcion +'\">'+ descripcion.substr(0,50) + \"...\" +'</td>');\r\n                    tr.append('<td>S/ '+ obj.gastos +'</td>');\r\n                    tr.append('<td class=\"text-center\">' +\r\n                        '<div class=\"btn-group\">' +\r\n                        '<button class=\"btn btn-xs blue dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Movimientos' +\r\n                        '<i class=\"fa fa-angle-down\"></i>' +\r\n                        '</button>' +\r\n                        '<ul class=\"dropdown-menu pull-right\" role=\"menu\">' +\r\n                        '<li><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></li>' +\r\n                        '<li><a href=\"'+ obj.url_lista_gastos +'\" data-target=\"#ajax\" data-toggle=\"modal\">Gastos</a></li>' +\r\n                        '</ul>' +\r\n                        '</div>' +\r\n                        '</td>' +\r\n                        '</tr>');\r\n                    $(\"#accion-lista-\"+id+\" tbody\").append(tr);\r\n                });\r\n\r\n                $(\".accion-cerrar\").on(\"click\", function (e) {\r\n                    e.preventDefault();\r\n                    var id = $(this).data('id');\r\n                    $(\"#acciones-\" + id).fadeOut();\r\n                });\r\n            },\r\n            beforeSend: function () { $('.progress').show(); },\r\n            complete: function () { $('.progress').hide(); },\r\n            error: function(error) {\r\n                console.log(\"ERROR: Lista de Acciones\");\r\n                console.log(error);\r\n            }\r\n        });\r\n    });\r\n}"]}