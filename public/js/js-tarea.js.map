{"version":3,"sources":["js-tarea.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"js-tarea.js","sourcesContent":["//MOSTRAR ACCIONES DE TAREA DEL EXPEDIENTE\r\n$(\".tarea-acciones\").on(\"click\", function(e) {\r\n    e.preventDefault();\r\n\r\n    var id = $(this).data('id');\r\n    var list = $(this).data('list');\r\n    var create = $(this).data('create');\r\n\r\n    $.ajax({\r\n        url: list,\r\n        type: 'GET',\r\n        success: function(result){\r\n\r\n            var html = '<tr id=\"accion-'+id+'\" class=\"bg-default\" style=\"display:none;\"><td style=\"padding:20px 15px;\" colspan=\"23\">' +\r\n                            '<div class=\"btn-group pull-left\">' +\r\n                                '<h3 class=\"table-title\">Acciones</h3>' +\r\n                            '</div>' +\r\n                            '<div class=\"btn-group pull-right table-botones\">' +\r\n                                '<a class=\"btn sbold white accion-cerrar\" href=\"#\" data-id=\"'+id+'\"> Cerrar </a>' +\r\n                                '<a class=\"btn sbold blue-soft\" href=\"'+create+'\" data-target=\"#ajax\" data-toggle=\"modal\"> Agregar nueva acción <i class=\"fa fa-plus\"></i></a>' +\r\n                            '</div>' +\r\n                            '<table id=\"accion-lista-'+id+'\" class=\"table table-striped table-bordered table-hover order-column\">' +\r\n                                '<thead>' +\r\n                                    '<tr role=\"row\" class=\"heading\">' +\r\n                                        '<td>Fecha</td>' +\r\n                                        '<td>Desde</td>' +\r\n                                        '<td>Hasta</td>' +\r\n                                        '<td>Horas</td>' +\r\n                                        '<td>Descripcion</td>' +\r\n                                        '<td></td>' +\r\n                                    '</tr>' +\r\n                                '</thead>' +\r\n                                '<tbody>' +\r\n                                '</tbody>' +\r\n                            '</table>' +\r\n                        '</td></tr>';\r\n\r\n            $(\"#tarea-\" + id).after(html);\r\n            $.each(JSON.parse(result), function(idx, obj) {\r\n                tr = $('<tr id=\"accion-select-'+ obj.id +'\">');\r\n                tr.append('<td>'+ obj.fecha_accion +'</td>');\r\n                tr.append('<td>'+ obj.desde +'</td>');\r\n                tr.append('<td>'+ obj.hasta +'</td>');\r\n                tr.append('<td>'+ obj.horas +'</td>');\r\n                tr.append('<td>'+ obj.descripcion +'</td>');\r\n                tr.append('<td class=\"text-center\">' +\r\n                                '<div class=\"btn-group\">' +\r\n                                    '<button class=\"btn btn-xs blue dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Movimientos' +\r\n                                        '<i class=\"fa fa-angle-down\"></i>' +\r\n                                    '</button>' +\r\n                                    '<ul class=\"dropdown-menu pull-right\" role=\"menu\">' +\r\n                                        '<li><a href=\"'+ obj.url_lista_gastos +'\" data-target=\"#ajax\" data-toggle=\"modal\">Gastos</a></li>' +\r\n                                        '<li><a href=\"'+ obj.url_editar +'\" data-target=\"#ajax\" data-toggle=\"modal\">Editar</a></li>' +\r\n                                        '<li><a href=\"#\" data-url=\"'+ obj.url_eliminar +'\" data-title=\"'+ obj.descripcion +'\" data-accion=\"'+ obj.id +'\" class=\"btn-delete\">Eliminar</a></li>' +\r\n                                    '</ul>' +\r\n                                '</div>' +\r\n                            '</td></tr>');\r\n                $(\"#accion-lista-\"+id+\" tbody\").append(tr);\r\n\r\n            });\r\n            $(\"#accion-\" + id).fadeIn();\r\n\r\n            borrarAccion();\r\n\r\n            var tr;\r\n\r\n            $(\".accion-cerrar\").on(\"click\", function (e) {\r\n                e.preventDefault();\r\n                var id = $(this).data('id');\r\n                $(\"#accion-\" + id).fadeOut();\r\n            });\r\n        },\r\n        beforeSend: function () { $('.progress').show(); },\r\n        complete: function () { $('.progress').hide(); },\r\n        error: function() {\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\nfunction borrarAccion(){\r\n    $('.btn-delete').on(\"click\", function(e){\r\n        e.preventDefault();\r\n\r\n        var url = $(this).data('url');\r\n        var title = $(this).data('title');\r\n        var accion = $(this).data('accion');\r\n\r\n        bootbox.dialog({\r\n            title: 'Eliminar registro',\r\n            message: '\\<\\strong\\>\\Desea eliminar la acción:\\</\\strong\\>\\ '+ title,\r\n            closeButton: false,\r\n            buttons: {\r\n                cancel: {\r\n                    label: 'Cancelar',\r\n                    className: 'default'\r\n                },\r\n                success: {\r\n                    label: 'Eliminar',\r\n                    className: 'blue',\r\n                    callback: function() {\r\n                        $.ajax({\r\n                            url: url,\r\n                            type: 'POST',\r\n                            data: {'_method': 'DELETE'},\r\n                            headers: { 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content') },\r\n                            beforeSend: function () { $('.progress').show(); },\r\n                            complete: function () { $('.progress').hide(); },\r\n                            success: function (result) {\r\n                                $(\"#mensajeAjax\").show();\r\n                                $(\"#mensajeAjax .alert\").show().removeClass('alert-danger').addClass('alert-success');\r\n                                $(\"#mensajeAjax span\").text(result.message);\r\n                                $(\"#accion-select-\"+ accion).fadeOut();\r\n                            },\r\n                            error: function (result) {\r\n                                $(\"#mensajeAjax\").show();\r\n                                $(\"#mensajeAjax .alert\").show().removeClass('alert-success').addClass('alert-danger');\r\n                                $(\"#mensajeAjax span\").text(\"Se produjo un error al eliminar el registro\");\r\n                                $(\".accion-select-\"+ accion).show();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n}"]}