$(".tarea-acciones").on("click",function(a){a.preventDefault();var t=$(this).data("id"),e=$(this).data("tiempo-total"),d=$(this).data("list"),i=$(this).data("create");$.ajax({url:d,type:"GET",success:function(a){var d='<tr id="accion-'+t+'" class="bg-default" style="display:none;"><td style="padding:20px 15px;" colspan="23"><div class="btn-group tabla-cabecera"><h3 class="table-title">Acciones</h3></div><div class="btn-group tabla-cabecera"><h3 class="table-title">Tiempo total: '+e+'</h3></div><div class="btn-group table-botones tabla-cabecera"><a class="btn sbold white accion-cerrar" href="#" data-id="'+t+'"> Cerrar </a><a class="btn sbold blue-soft" href="'+i+'" data-target="#ajax" data-toggle="modal"> Agregar nueva acción <i class="fa fa-plus"></i></a></div><table id="accion-lista-'+t+'" class="table table-striped table-bordered table-hover order-column"><thead><tr role="row" class="heading"><td>Fecha</td><td>Desde</td><td>Hasta</td><td>Horas</td><td>Descripción</td><td>Gastos</td><td></td></tr></thead><tbody></tbody></table></td></tr>';$("#tarea-"+t).after(d);var s;$.each(JSON.parse(a),function(a,e){s=e.descripcion,l=$('<tr id="accion-select-'+e.id+'">'),l.append("<td>"+e.fecha_accion+"</td>"),l.append("<td>"+e.desde+"</td>"),l.append("<td>"+e.hasta+"</td>"),l.append("<td>"+e.horas+"</td>"),l.append('<td data-tooltip="'+e.descripcion+'">'+s.substr(0,50)+"...</td>"),l.append("<td>S/ "+e.gastos+"</td>"),l.append('<td class="text-center"><div class="btn-group"><button class="btn btn-xs blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> Movimientos<i class="fa fa-angle-down"></i></button><ul class="dropdown-menu pull-right" role="menu"><li><a href="'+e.url_lista_gastos+'" data-target="#ajax" data-toggle="modal">Gastos</a></li><li><a href="'+e.url_editar+'" data-target="#ajax" data-toggle="modal">Editar</a></li><li><a href="#" data-url="'+e.url_eliminar+'" data-title="'+e.descripcion+'" data-accion="'+e.id+'" class="btn-delete">Eliminar</a></li></ul></div></td></tr>'),$("#accion-lista-"+t+" tbody").append(l)}),$("#accion-"+t).fadeIn(),borrarAccion();var l;$(".accion-cerrar").on("click",function(a){a.preventDefault();var t=$(this).data("id");$("#accion-"+t).fadeOut()})},beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide()},error:function(){}})});