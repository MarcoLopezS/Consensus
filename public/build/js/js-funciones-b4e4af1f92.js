function getObjects(a,e,t){var s=[];for(var o in a)a.hasOwnProperty(o)&&("object"==typeof a[o]?s=s.concat(getObjects(a[o],e,t)):o==e&&a[o]==t||o==e&&""==t?s.push(a):a[o]==t&&""==e&&s.lastIndexOf(a)==-1&&s.push(a));return s}function getValues(a,e){var t=[];for(var s in a)a.hasOwnProperty(s)&&("object"==typeof a[s]?t=t.concat(getValues(a[s],e)):s==e&&t.push(a[s]));return t}function getKeys(a,e){var t=[];for(var s in a)a.hasOwnProperty(s)&&("object"==typeof a[s]?t=t.concat(getKeys(a[s],e)):a[s]==e&&t.push(s));return t}function editarAccion(){$(".editar-accion").on("click",function(a){a.preventDefault();var e=$(this).data("url"),t=$(this).data("update"),s=$("#token").attr("content");$.ajax({url:e,type:"GET",beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide(),$("#form-agregar").fadeOut(),$("#formCreateSubmit").fadeOut(),$("#form-editar").fadeIn(),$("#formUpdateSubmit").fadeIn()},success:function(a){var e='<form method="POST" action='+t+' id="formEdit" class="horizontal-form" autocomplete="off"><input name="_method" type="hidden" value="PUT"><input name="_token" type="hidden" value="'+s+'"><div class="form-body"><div class="col-md-4"><div class="form-group"><label for="fecha" class="control-label">Fecha</label><div class="input-group input-medium date date-picker" data-date-format="dd/mm/yyyy" data-date-viewmode="years"><input type="text" name="fecha" value="'+a.fecha+'" class="form-control" /><span class="input-group-btn"><button class="btn default" type="button"><i class="fa fa-calendar"></i></button></span></div></div></div><div class="col-md-4"><div class="form-group"><label for="desde" class="control-label">Desde</label><div class="input-group"><input type="text" name="desde" value="'+a.desde+'" class="form-control timepicker timepicker-24" /><span class="input-group-btn"><button class="btn default" type="button"><i class="fa fa-clock-o"></i></button></span></div></div></div><div class="col-md-4"><div class="form-group"><label for="hasta" class="control-label">Hasta</label><div class="input-group"><input type="text" name="hasta" value="'+a.hasta+'" class="form-control timepicker timepicker-24" /><span class="input-group-btn"><button class="btn default" type="button"><i class="fa fa-clock-o"></i></button></span></div></div></div><div class="col-md-12"><div class="form-group"><label for="descripcion" class="control-label">Descripci贸n</label><textarea name="descripcion" class="form-control" rows="3">'+a.descripcion+"</textarea></div></div></div></form>";$("#formulario-contenido").append(e),$(".date-picker").datepicker({orientation:"left",autoclose:!0,language:"es"}),$(".timepicker-24").timepicker({autoclose:!0,minuteStep:5,showSeconds:!1,showMeridian:!1}),$("#form-editar").fadeIn()}})})}function borrarAccion(){$(".btn-delete").on("click",function(a){a.preventDefault();var e=$(this).data("url"),t=$(this).data("title"),s=$(this).data("accion");bootbox.dialog({title:"Eliminar registro",message:"<strong>Desea eliminar la acci贸n:</strong> "+t,closeButton:!1,buttons:{cancel:{label:"Cancelar",className:"default"},success:{label:"Eliminar",className:"blue",callback:function(){$.ajax({url:e,type:"POST",data:{_method:"DELETE"},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide()},success:function(a){$("#mensajeAjax").show(),$("#mensajeAjax .alert").show().removeClass("alert-danger").addClass("alert-success"),$("#mensajeAjax span").text(a.message),$("#accion-select-"+s).fadeOut()},error:function(a){$("#mensajeAjax").show(),$("#mensajeAjax .alert").show().removeClass("alert-success").addClass("alert-danger"),$("#mensajeAjax span").text("Se produjo un error al eliminar el registro"),$(".accion-select-"+s).show()}})}}}})})}function tareaListaAcciones(){$(".expediente-tarea-acciones-lista").on("click",function(a){a.preventDefault();var e=$(this).data("id"),t=$(this).data("list"),s=$(this).data("create");$.ajax({url:t,type:"GET",success:function(a){var t='<tr id="acciones-'+e+'" class="bg-default" style="display:none;"><td style="padding:20px 15px; border: 2px solid #b0b0b0;" colspan="23"><div class="btn-group pull-left"><h3 class="table-title">Acciones</h3></div><div class="btn-group pull-right table-botones"><a class="btn sbold white accion-cerrar" href="#" data-id="'+e+'"> Cerrar </a><a class="btn sbold blue-soft" href="'+s+'" data-target="#ajax" data-toggle="modal"> Agregar nueva acci贸n <i class="fa fa-plus"></i></a></div><table id="accion-lista-'+e+'" class="table table-striped table-bordered table-hover order-column"><thead><tr role="row" class="heading"><td>Fecha</td><td>Desde</td><td>Hasta</td><td>Horas</td><td>Descripci贸n</td><td>Gastos</td><td></td></tr></thead><tbody></tbody></table></td></tr>';$("#tarea-select-"+e).after(t),$("#acciones-"+e).fadeIn();var o,n;$.each(JSON.parse(a),function(a,t){n=t.descripcion,o=$('<tr id="accion-select-'+t.id+'">'),o.append("<td>"+t.fecha_accion+"</td>"),o.append("<td>"+t.desde+"</td>"),o.append("<td>"+t.hasta+"</td>"),o.append("<td>"+t.horas+"</td>"),o.append('<td data-tooltip="'+t.descripcion+'">'+n.substr(0,50)+"...</td>"),o.append("<td>S/ "+t.gastos+"</td>"),o.append('<td class="text-center"><div class="btn-group"><button class="btn btn-xs blue dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> Movimientos<i class="fa fa-angle-down"></i></button><ul class="dropdown-menu pull-right" role="menu"><li><a href="'+t.url_editar+'" data-target="#ajax" data-toggle="modal">Editar</a></li><li><a href="'+t.url_lista_gastos+'" data-target="#ajax" data-toggle="modal">Gastos</a></li></ul></div></td></tr>'),$("#accion-lista-"+e+" tbody").append(o)}),$(".accion-cerrar").on("click",function(a){a.preventDefault();var e=$(this).data("id");$("#acciones-"+e).fadeOut()})},beforeSend:function(){$(".progress").show()},complete:function(){$(".progress").hide()},error:function(a){console.log("ERROR: Lista de Acciones"),console.log(a)}})})}